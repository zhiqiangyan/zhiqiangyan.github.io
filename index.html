<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>JSå¿ƒç†å°å±‹ - 16å‹äººæ ¼æ·±åº¦ç‰ˆ</title>
    <script src="https://unpkg.com/jspsych@7.3.1"></script>
    <link href="https://unpkg.com/jspsych@7.3.1/css/jspsych.css" rel="stylesheet" type="text/css" />
    <script src="https://unpkg.com/@jspsych/plugin-html-button-response@1.1.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            background: #f4f6f9;
            margin: 0; padding: 0;
            color: #333;
        }

        /* å¤§å… UI */
        #lobby {
            max-width: 800px; margin: 80px auto; text-align: center;
            animation: fadein 0.8s;
        }
        @keyframes fadein { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .header-title { font-size: 3em; color: #2c3e50; margin-bottom: 10px; font-weight: 800; }
        .header-subtitle { color: #7f8c8d; margin-bottom: 60px; font-size: 1.2em; }

        .door-container { display: flex; justify-content: center; gap: 50px; flex-wrap: wrap; }
        .door {
            width: 240px; height: 360px; background: white; border-radius: 20px;
            cursor: pointer; position: relative; overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08); transition: transform 0.3s;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            border-top: 8px solid #3498db;
        }
        .door:hover { transform: translateY(-12px); box-shadow: 0 20px 40px rgba(0,0,0,0.12); }
        .door:nth-child(2) { border-top-color: #e67e22; }

        .door-icon { font-size: 5em; margin-bottom: 25px; }
        .door-title { font-weight: bold; font-size: 1.4em; color: #34495e; margin-bottom: 10px; }
        .door-tag { font-size: 0.85em; background: #eef2f7; color: #57606f; padding: 6px 15px; border-radius: 20px; font-weight: bold; }

        /* MBTI æ ·å¼ */
        .mbti-btn {
            display: block; width: 100%; padding: 20px; margin: 10px 0;
            border: 2px solid #eef2f7; border-radius: 12px; background: white;
            text-align: left; transition: all 0.2s; font-size: 1.05em; cursor: pointer;
        }
        .mbti-btn:hover { border-color: #3498db; background: #fbfdff; }

        /* éœå…°å¾·ç”»åƒå¡ç‰‡ */
        .holland-card-btn {
            width: 100% !important; border: 2px solid #e0e0e0; border-radius: 12px; padding: 18px;
            text-align: left; cursor: pointer; background: white; transition: 0.2s;
            display: flex; flex-direction: column; align-items: flex-start; margin: 0;
            min-height: 240px;
            position: relative;
        }
        .holland-card-btn:hover { border-color: #e67e22; background: #fffaf4; transform: scale(1.02); box-shadow: 0 5px 20px rgba(230, 126, 34, 0.15); }
        
        .h-header { display: flex; align-items: center; width: 100%; margin-bottom: 12px; border-bottom: 1px solid #eee; padding-bottom: 8px; }
        .h-icon { font-size: 2.2em; margin-right: 12px; }
        .h-title { font-weight: bold; font-size: 1.3em; color: #2c3e50; }
        .h-section { font-size: 0.9em; color: #555; margin-bottom: 8px; line-height: 1.5; width: 100%; }
        .h-label { font-weight: bold; color: #e67e22; margin-right: 5px; }

        /* ç»“æœé¡µé€šç”¨ */
        .result-box {
            background: white; max-width: 800px; margin: 40px auto; padding: 50px;
            border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); text-align: center;
        }
        .badge { font-size: 2.5em; font-weight: 800; color: #2c3e50; margin-bottom: 5px; }
        .badge-subtitle { font-size: 1.2em; color: #e67e22; font-weight: bold; margin-bottom: 20px; letter-spacing: 1px; }
        .quote { font-style: italic; color: #7f8c8d; margin-bottom: 30px; border-left: 4px solid #3498db; display: inline-block; padding-left: 15px; font-size: 1.1em; line-height: 1.5;}

        /* MBTI è¯¦ç»†åé¦ˆæ–‡æœ¬ */
        .mbti-desc { text-align: left; background: #f8f9fa; padding: 25px; border-radius: 15px; margin-top: 20px; color: #555; line-height: 1.8; font-size: 1em; }
        .mbti-desc b { color: #2c3e50; }

        /* éœå…°å¾·æ— å›¾è¡¨ç»“æœæ ·å¼ */
        .holland-result-container { text-align: left; margin-top: 20px; }
        .hr-header { display: flex; align-items: center; justify-content: center; margin-bottom: 30px; background: #fff8f0; padding: 20px; border-radius: 15px; border: 1px solid #ffeebb; }
        .hr-icon { font-size: 4em; margin-right: 20px; }
        .hr-title { font-size: 2em; font-weight: bold; color: #d35400; }
        .hr-section { margin-bottom: 25px; background: #fdfdfd; padding: 20px; border-radius: 12px; border-left: 5px solid #e67e22; box-shadow: 0 2px 5px rgba(0,0,0,0.03); }
        .hr-label { font-size: 1.1em; font-weight: bold; color: #2c3e50; margin-bottom: 10px; display: block; border-bottom: 1px solid #eee; padding-bottom: 5px;}
        .hr-text { font-size: 1em; line-height: 1.8; color: #444; }

        #jspsych-target { display: none; min-height: 100vh; }
        #jspsych-html-button-response-btngroup { width: 100%; }
    </style>
</head>
<body>

    <div id="lobby">
        <h1 class="header-title">ğŸ›– å¿ƒç†å°å±‹ v7</h1>
        <p class="header-subtitle">æ›´æ‡‚ä½ çš„ MBTI 16å‹äººæ ¼è§£æ</p>

        <div class="door-container">
            <div class="door" onclick="startTest('mbti')">
                <div class="door-icon">âš–ï¸</div>
                <div class="door-title">MBTI äººæ ¼</div>
                <span class="door-tag">24é¢˜ | 16ç§æ·±åº¦åé¦ˆ</span>
            </div>
            <div class="door" onclick="startTest('holland')">
                <div class="door-icon">ğŸ”­</div>
                <div class="door-title">éœå…°å¾·èŒä¸šå…´è¶£</div>
                <span class="door-tag">å•æ¬¡ç”»åƒé€‰æ‹©</span>
            </div>
        </div>
    </div>

    <div id="jspsych-target"></div>

    <script>
        const jsPsych = initJsPsych({
            display_element: 'jspsych-target',
            on_finish: function() {
                const box = document.querySelector('.result-box');
                if(box) {
                    box.insertAdjacentHTML('beforeend', 
                        '<br><button onclick="location.reload()" style="margin-top:30px; padding:12px 35px; border:none; background:#34495e; color:white; border-radius:30px; cursor:pointer; font-size:16px;">ğŸšª è¿”å›å¤§å…</button>'
                    );
                }
            }
        });

        // ==========================================
        // 1. MBTI 16ç§äººæ ¼æ•°æ®åº“ (ç§°å· + æ·±åº¦åé¦ˆ)
        // ==========================================
        const mbti_results = {
            "INTJ": { title: "å»ºç­‘å¸ˆ (Architect)", quote: "å­¤ç‹¬çš„å®Œç¾ä¸»ä¹‰è€…ï¼Œä»¥é€»è¾‘æ„å»ºä¸–ç•Œã€‚", text: "ä½ æ˜¯å¯Œæœ‰æƒ³è±¡åŠ›å’Œæˆ˜ç•¥æ€§çš„æ€æƒ³å®¶ã€‚ä½ å¯¹ä»–äººçš„æœŸæœ›å¾ˆé«˜ï¼Œå¯¹è‡ªå·±æ›´é«˜ã€‚ä½ å€¾å‘äºä»å…¨å±€çœ‹é—®é¢˜ï¼Œå–„äºå‘ç°ç³»ç»Ÿä¸­çš„æ¼æ´å¹¶åŠ ä»¥æ”¹è¿›ã€‚ä½ ç‹¬ç«‹ã€ç†æ€§ï¼Œæœ‰æ—¶æ˜¾å¾—å†·æ¼ ï¼Œä½†å†…å¿ƒå¯¹çŸ¥è¯†å’Œæ•ˆç‡æœ‰ç€ç«ä¸€èˆ¬çš„çƒ­æƒ…ã€‚" },
            "INTP": { title: "é€»è¾‘å­¦å®¶ (Logician)", quote: "å¯¹ä¸‡ç‰©å……æ»¡å¥½å¥‡çš„è§£æ„è€…ã€‚", text: "ä½ æ˜¯å¤©ç”Ÿçš„å‘æ˜å®¶ï¼Œå¯¹çŸ¥è¯†æœ‰ç€æ­¢ä¸ä½çš„æ¸´æœ›ã€‚ä½ å–œæ¬¢åœ¨è„‘æµ·ä¸­æ„å»ºç†è®ºï¼Œå¯»æ‰¾å®‡å®™çš„è¿è¡Œè§„å¾‹ã€‚ç¤¾äº¤é—²èŠè®©ä½ æ„Ÿåˆ°ä¹å‘³ï¼Œä½†å½“è¯é¢˜è½¬å‘æŠ½è±¡æ¦‚å¿µæˆ–ç§‘å­¦ç†è®ºæ—¶ï¼Œä½ ä¼šå˜å¾—æ»”æ»”ä¸ç»ã€‚ä½ æ˜¯æœ€å…·æœ‰ç‹¬ç«‹æ€ç»´çš„ä¸ªä½“ä¹‹ä¸€ã€‚" },
            "ENTJ": { title: "æŒ‡æŒ¥å®˜ (Commander)", quote: "å¤©ç”Ÿçš„é¢†å¯¼è€…ï¼Œä¸ºæˆå°±è€Œç”Ÿã€‚", text: "ä½ æ˜¯æœæ–­ã€å¤§èƒ†çš„é¢†å¯¼è€…ï¼Œå–„äºå‘ç°é—®é¢˜å¹¶è¿…é€Ÿåˆ¶å®šè§£å†³æ–¹æ¡ˆã€‚ä½ å……æ»¡é­…åŠ›å’Œè‡ªä¿¡ï¼Œèƒ½å¤Ÿå‡èšä¼—äººæœç€å…±åŒç›®æ ‡åŠªåŠ›ã€‚å¯¹ä½ è€Œè¨€ï¼Œç”Ÿæ´»å°±æ˜¯ä¸€åœºå……æ»¡æŒ‘æˆ˜çš„æ£‹å±€ï¼Œè€Œä½ æ€»æ˜¯åŠ›æ±‚èƒœåˆ©ã€‚" },
            "ENTP": { title: "è¾©è®ºå®¶ (Debater)", quote: "èªæ˜çš„æŒ‘æˆ˜è€…ï¼Œçƒ­è¡·äºæ€ç»´äº¤é”‹ã€‚", text: "ä½ æœºæ™ºã€å¹½é»˜ï¼Œå–œæ¬¢ä»ä¸åŒè§’åº¦å‰–æé—®é¢˜ã€‚ä½ å¹¶ä¸ä¸€å®šæ˜¯ä¸ºäº†è¾¾æˆå…±è¯†ï¼Œè€Œæ˜¯äº«å—æ€æƒ³ç¢°æ’çš„ç«èŠ±ã€‚ä½ è®¨åŒå¸¸è§„å’ŒæŸç¼šï¼Œæ“…é•¿æ‰“ç ´è§„åˆ™ï¼Œæ˜¯å¤©ç”Ÿçš„åˆ›æ–°è€…å’Œåˆ›ä¸šè€…ã€‚" },
            "INFJ": { title: "æå€¡è€… (Advocate)", quote: "å®‰é™è€Œç¥ç§˜çš„ç†æƒ³ä¸»ä¹‰è€…ã€‚", text: "ä½ æ˜¯æœ€ç¨€æœ‰çš„äººæ ¼ç±»å‹ä¹‹ä¸€ã€‚ä½ å¤–è¡¨å®‰é™ï¼Œå†…å¿ƒå´æ³¢æ¾œå£®é˜”ã€‚ä½ æœ‰ç€æå¼ºçš„æ´å¯ŸåŠ›å’ŒåŒç†å¿ƒï¼Œè‡´åŠ›äºç†è§£ä»–äººçš„æ·±å±‚åŠ¨æœºã€‚ä½ ä¸ä»…æ˜¯æ¢¦æƒ³å®¶ï¼Œæ›´æ˜¯è¡ŒåŠ¨æ´¾ï¼Œæ¯•ç”Ÿéƒ½åœ¨ä¸ºå®ç°å¿ƒä¸­çš„ç†æƒ³ä¸–ç•Œè€ŒåŠªåŠ›ã€‚" },
            "INFP": { title: "è°ƒåœè€… (Mediator)", quote: "æ¸©æŸ”çš„æ²»æ„ˆè€…ï¼Œå¿ƒä¸­æœ‰è¯—ã€‚", text: "ä½ çœ‹èµ·æ¥å®³ç¾å†·é™ï¼Œå†…å¿ƒå´ç‡ƒçƒ§ç€æ¿€æƒ…ã€‚ä½ å—ä»·å€¼è§‚è€Œéé€»è¾‘çš„å¼•å¯¼ï¼Œå¯¹ä»–äººçš„æƒ…æ„Ÿæå…¶æ•æ„Ÿã€‚ä½ è¿½æ±‚çœŸç†ã€å–„è‰¯å’Œç¾ï¼Œæ˜¯å¤©ç”Ÿçš„è‰ºæœ¯å®¶å’Œä½œå®¶ã€‚åœ¨çº·æ‰°çš„ä¸–ç•Œä¸­ï¼Œä½ å§‹ç»ˆå®ˆæŠ¤ç€å†…å¿ƒçš„ä¸€æ–¹å‡€åœŸã€‚" },
            "ENFJ": { title: "ä¸»äººå…¬ (Protagonist)", quote: "å……æ»¡é­…åŠ›çš„é¢†å¯¼è€…ï¼Œæ¿€åŠ±äººå¿ƒã€‚", text: "ä½ çƒ­æƒ…ã€åˆ©ä»–ï¼Œå–„äºå‘ç°ä»–äººçš„æ½œèƒ½ã€‚ä½ ä¸ä»…è‡ªå·±è¿½æ±‚å“è¶Šï¼Œæ›´æ¸´æœ›å¸®åŠ©å‘¨å›´çš„äººå…±åŒæˆé•¿ã€‚ä½ æœ‰ç€æå¼ºçš„æ„ŸæŸ“åŠ›ï¼Œåœ¨å›¢é˜Ÿä¸­å¾€å¾€æ˜¯å‡èšäººå¿ƒçš„æ ¸å¿ƒäººç‰©ï¼Œå¤§å®¶æ„¿æ„ç›¸ä¿¡å¹¶è¿½éšä½ ã€‚" },
            "ENFP": { title: "ç«é€‰è€… (Campaigner)", quote: "è‡ªç”±çš„çµé­‚ï¼Œå……æ»¡æ— é™å¯èƒ½ã€‚", text: "ä½ çƒ­æƒ…æ´‹æº¢ï¼Œç‹¬ç«‹ä¸”å……æ»¡åŒæƒ…å¿ƒã€‚å¯¹ä½ æ¥è¯´ï¼Œç”Ÿæ´»æ˜¯å®å¤§çš„æˆå‰§ï¼Œå……æ»¡äº†äº’ç›¸å…³è”çš„äººå’Œäº‹ã€‚ä½ è®¨åŒé‡å¤å’Œæ¯ç‡¥ï¼Œè¿½æ±‚åˆ›æ„å’Œè‡ªç”±ã€‚ä½ æœ‰ç€æä½³çš„ç¤¾äº¤å¤©èµ‹ï¼Œèƒ½ç¬é—´ç‚¹ç‡ƒæ°”æ°›ï¼Œæ˜¯äººç¾¤ä¸­çš„å¼€å¿ƒæœã€‚" },
            "ISTJ": { title: "ç‰©æµå¸ˆ (Logistician)", quote: "æ³¨é‡äº‹å®ï¼Œè´Ÿè´£ä»»çš„ç°å®ä¸»ä¹‰è€…ã€‚", text: "ä½ æ˜¯ç¤¾ä¼šçš„åŸºçŸ³ï¼Œæ­£ç›´ã€åŠ¡å®ã€æªå°½èŒå®ˆã€‚ä½ ä¾äº‹å®è€Œéå‡è®¾ï¼Œåšå‡ºçš„æ‰¿è¯ºå¿…å®šå…‘ç°ã€‚ä½ å–œæ¬¢æ¸…æ™°çš„è§„åˆ™å’Œç§©åºï¼Œæ— è®ºæ˜¯å·¥ä½œè¿˜æ˜¯ç”Ÿæ´»ï¼Œä½ éƒ½èƒ½å°†å…¶æ‰“ç†å¾—äº•äº•æœ‰æ¡ï¼Œæ˜¯å›¢é˜Ÿä¸­æœ€å€¼å¾—ä¿¡èµ–çš„ä¼™ä¼´ã€‚" },
            "ISFJ": { title: "å®ˆå«è€… (Defender)", quote: "ä¸“æ³¨æ¸©æš–çš„å®ˆæŠ¤è€…ï¼Œæ—¶åˆ»å‡†å¤‡ä¿æŠ¤çˆ±äººã€‚", text: "ä½ éå¸¸ä¸“æ³¨è€Œæ¸©æš–ï¼Œæ—¶åˆ»å‡†å¤‡ç€ä¿æŠ¤ä½ æ‰€çˆ±çš„äººã€‚ä½ è™½ç„¶å†…å‘ï¼Œä½†æ‹¥æœ‰æä½³çš„è§‚å¯ŸåŠ›å’Œè®°å¿†åŠ›ï¼Œè®°å¾—ä½ä»–äººçš„å¾®å°ç»†èŠ‚ã€‚ä½ å‹¤å‹‰ã€å¥‰çŒ®ï¼Œä¸æ±‚å›æŠ¥åœ°ä¸ºä»–äººæœåŠ¡ï¼Œæ˜¯çœŸæ­£çš„åˆ©ä»–ä¸»ä¹‰è€…ã€‚" },
            "ESTJ": { title: "æ€»ç»ç† (Executive)", quote: "å‡ºè‰²çš„ç®¡ç†è€…ï¼Œæ— å¯æ¯”æ‹Ÿçš„æ‰§è¡ŒåŠ›ã€‚", text: "ä½ æ˜¯ä¼ ç»Ÿå’Œç§©åºçš„ä»£è¡¨ã€‚ä½ è¯šå®ã€æœæ–­ï¼Œåšä¿¡ä¾æ®è§„åˆ™åŠäº‹æ˜¯ç¤¾ä¼šè¿è¡Œçš„åŸºç¡€ã€‚ä½ å–„äºç®¡ç†äººå‘˜å’Œäº‹åŠ¡ï¼Œèƒ½å¤Ÿå¸¦é¢†å›¢é˜Ÿåœ¨æ··ä¹±ä¸­å»ºç«‹ç§©åºã€‚ä½ åŠ¡å®ä¸”é«˜æ•ˆï¼Œæ˜¯å¤©ç”Ÿçš„é¡¹ç›®ç®¡ç†è€…ã€‚" },
            "ESFJ": { title: "æ‰§æ”¿å®˜ (Consul)", quote: "ææœ‰çˆ±å¿ƒï¼Œæ—¶åˆ»å—äººæ¬¢è¿ã€‚", text: "ä½ æ˜¯å…¸å‹çš„åˆ©ä»–ä¸»ä¹‰è€…ï¼Œä¹Ÿæ˜¯ç¤¾äº¤åœºåˆçš„æ˜æ˜Ÿã€‚ä½ å…³å¿ƒä»–äººçš„æ„Ÿå—ï¼Œä¹äºåŠ©äººï¼Œå¹¶å¸Œæœ›å¤§å®¶éƒ½èƒ½å’Œè°ç›¸å¤„ã€‚ä½ é‡è§†ä¼ ç»Ÿå’Œå¿ è¯šï¼Œå–œæ¬¢ç»„ç»‡èšä¼šï¼Œç¡®ä¿æ¯ä¸ªäººéƒ½æ„Ÿåˆ°è¢«ç…§é¡¾å’Œè¢«é‡è§†ã€‚" },
            "ISTP": { title: "é‰´èµå®¶ (Virtuoso)", quote: "å¤§èƒ†è€Œå®é™…çš„å®éªŒå®¶ï¼Œæ“…é•¿ä½¿ç”¨å·¥å…·ã€‚", text: "ä½ æ˜¯å¤©ç”Ÿçš„åˆ¶é€ è€…ï¼Œä»ä¸€ä¸ªä¸ªé¡¹ç›®ä¸­å­¦ä¹ ï¼Œç”¨ç†æ€§å’Œå¥½å¥‡å¿ƒå»è§‚å¯Ÿä¸–ç•Œã€‚ä½ é€šå¸¸å†·é™è€Œç†æ€§ï¼Œä½†ä¹Ÿæœ‰ç€ä¸€é¢—å–œæ¬¢å†’é™©çš„å¿ƒã€‚ä½ æ“…é•¿åº”å¯¹å±æœºï¼Œåœ¨çªå‘çŠ¶å†µä¸‹å¾€å¾€èƒ½ä¿æŒæœ€æ¸…é†’çš„å¤´è„‘ã€‚" },
            "ISFP": { title: "æ¢é™©å®¶ (Adventurer)", quote: "çµæ´»æœ‰é­…åŠ›çš„è‰ºæœ¯å®¶ï¼Œæ—¶åˆ»å‡†å¤‡æ¢ç´¢æ–°äº‹ç‰©ã€‚", text: "ä½ æ´»åœ¨å½“ä¸‹ï¼Œäº«å—ç”Ÿæ´»å¸¦æ¥çš„æ„Ÿå®˜ä¹è¶£ã€‚ä½ éšæ€§ã€æ¸©å’Œï¼Œä¸å–œæ¬¢è¢«è§„åˆ™æŸç¼šã€‚ä½ æœ‰ç€æä½³çš„å®¡ç¾å¤©èµ‹ï¼Œæ— è®ºæ˜¯ç©¿æ­è¿˜æ˜¯åˆ›ä½œï¼Œéƒ½é€ç€ç‹¬ç‰¹çš„ä¸ªäººé£æ ¼ã€‚ä½ ç”¨è¡ŒåŠ¨è€Œéè¯­è¨€æ¥æ‰“ç ´å¸¸è§„ã€‚" },
            "ESTP": { title: "ä¼ä¸šå®¶ (Entrepreneur)", quote: "èªæ˜ã€ç²¾åŠ›å……æ²›ï¼Œäº«å—è¾¹ç¼˜ç”Ÿæ´»ã€‚", text: "ä½ æ˜¯è¡ŒåŠ¨æ´¾ï¼Œä¸å…¶åç€è®¨è®ºç†è®ºï¼Œä¸å¦‚èµ·èº«å»å®è·µã€‚ä½ æ´»åœ¨å½“ä¸‹ï¼Œå–œæ¬¢è§£å†³çœ¼å‰çš„é—®é¢˜ã€‚ä½ æ•é”ã€ç›´æ¥ï¼Œæœ‰ç€æå¼ºçš„é€‚åº”èƒ½åŠ›ã€‚ä½ æ˜¯å¤©ç”Ÿçš„å†’é™©å®¶ï¼Œå“ªé‡Œæœ‰æŒ‘æˆ˜ï¼Œå“ªé‡Œå°±æœ‰ä½ çš„èº«å½±ã€‚" },
            "ESFP": { title: "è¡¨æ¼”è€… (Entertainer)", quote: "è‡ªå‘çš„ã€ç²¾åŠ›å……æ²›çš„ï¼Œè®©ç”Ÿæ´»ä¸å†æ— èŠã€‚", text: "å¦‚æœæœ‰äººä¼šçªç„¶åœ¨è¡—ä¸Šè½½æ­Œè½½èˆï¼Œé‚£ä¸€å®šæ˜¯ä½ ã€‚ä½ æ…·æ…¨ã€çƒ­æƒ…ï¼Œæå…·å¹½é»˜æ„Ÿã€‚ä½ çƒ­çˆ±ç”Ÿæ´»ï¼Œä¹Ÿçƒ­çˆ±ä¸äººåˆ†äº«è¿™ä»½å¿«ä¹ã€‚å¯¹ä½ è€Œè¨€ï¼Œä¸–ç•Œå°±æ˜¯èˆå°ï¼Œä½ æ€»æ˜¯èƒ½æŠŠå¹³å‡¡çš„æ—¶åˆ»å˜å¾—é—ªé—ªå‘å…‰ã€‚" }
        };

        // 2. éœå…°å¾·å¡ç‰‡æ•°æ® (ä¿æŒä¸å˜)
        const holland_profiles = [
            { id: 'R', name: 'ç°å®å‹ (Realistic)', icon: 'ğŸ”§', traits: 'æ„¿æ„ä½¿ç”¨å·¥å…·ä»äº‹æ“ä½œæ€§å·¥ä½œï¼ŒåŠ¨æ‰‹èƒ½åŠ›å¼ºã€‚åšäº‹ä¿å®ˆï¼Œè¾ƒä¸ºè°¦è™šï¼Œç¼ºä¹ç¤¾äº¤èƒ½åŠ›ï¼Œå–œæ¬¢ç‹¬ç«‹åšäº‹ã€‚', activities: 'å–œæ¬¢æˆ·å¤–æ´»åŠ¨æˆ–æ“ä½œæœºå™¨ï¼Œä¸å–œæ¬¢åœ¨åŠå…¬å®¤å·¥ä½œã€‚', careers: 'åˆ¶é€ ä¸šã€æœºæ¢°ä¸šã€å†œä¸šã€ç‰¹ç§å·¥ç¨‹å¸ˆã€å†›äº‹å·¥ä½œã€‚' },
            { id: 'I', name: 'ç ”ç©¶å‹ (Investigative)', icon: 'ğŸ”¬', traits: 'æ€æƒ³å®¶è€Œéå®å¹²å®¶ï¼ŒæŠ½è±¡æ€ç»´èƒ½åŠ›å¼ºï¼Œæ±‚çŸ¥æ¬²å¼ºã€‚è€ƒè™‘é—®é¢˜ç†æ€§ï¼Œåšäº‹å–œæ¬¢ç²¾ç¡®ï¼Œå–œæ¬¢é€»è¾‘åˆ†æã€‚', activities: 'å¤„ç†ä¿¡æ¯ï¼Œæ¢ç´¢å’Œç†è§£ã€ç ”ç©¶é‚£äº›éœ€è¦åˆ†æã€æ€è€ƒçš„æŠ½è±¡é—®é¢˜ã€‚', careers: 'å®éªŒå®¤äººå‘˜ã€ç”Ÿç‰©å­¦å®¶ã€ç¤¾ä¼šå­¦å®¶ã€ç¨‹åºè®¾è®¡å‘˜ã€‚' },
            { id: 'A', name: 'è‰ºæœ¯å‹ (Artistic)', icon: 'ğŸ¨', traits: 'æœ‰åˆ›é€ åŠ›ï¼Œä¹äºåˆ›é€ æ–°é¢–æˆæœï¼Œæ¸´æœ›è¡¨ç°ä¸ªæ€§ã€‚åšäº‹ç†æƒ³åŒ–ï¼Œè¿½æ±‚å®Œç¾ï¼Œå–„äºè¡¨è¾¾ï¼Œå¿ƒæ€è¾ƒä¸ºå¤æ‚ã€‚', activities: 'åˆ›é€ ã€è‡ªæˆ‘è¡¨è¾¾ã€å†™ä½œã€éŸ³ä¹ã€è‰ºæœ¯å’Œæˆå‰§ã€‚', careers: 'ä½œå®¶ã€è‰ºæœ¯å®¶ã€è®¾è®¡å¸ˆã€æ¼”å‘˜ã€å¯¼æ¼”ã€ä¹é˜ŸæŒ‡æŒ¥ã€‚' },
            { id: 'S', name: 'ç¤¾ä¼šå‹ (Social)', icon: 'ğŸ¤', traits: 'å–œæ¬¢ä¸äººäº¤å¾€ã€å–„è¨€è°ˆã€æ„¿æ„æ•™å¯¼åˆ«äººã€‚å…³å¿ƒç¤¾ä¼šé—®é¢˜ï¼Œå¯»æ±‚å¹¿æ³›çš„äººé™…å…³ç³»ï¼Œçœ‹é‡ç¤¾ä¼šä¹‰åŠ¡ã€‚', activities: 'å¸®åŠ©åˆ«äººï¼Œå–œæ¬¢ä¸äººåˆä½œï¼Œçƒ­æƒ…å…³å¿ƒä»–äººçš„å¹¸ç¦ï¼Œä»äº‹å¯è¿ªã€åŸ¹è®­äº‹åŠ¡ã€‚', careers: 'æ•™å¸ˆã€ç¤¾ä¼šå·¥ä½œè€…ã€å’¨è¯¢å¸ˆã€å…¬å…³äººå‘˜ã€‚' },
            { id: 'E', name: 'ä¼ä¸šå‹ (Enterprising)', icon: 'ğŸ‘”', traits: 'è¿½æ±‚æƒåŠ›ã€æƒå¨å’Œè´¢å¯Œï¼Œå…·æœ‰é¢†å¯¼æ‰èƒ½ã€‚å–œæ¬¢ç«äº‰ã€æ•¢å†’é£é™©ã€‚ä¸ºäººåŠ¡å®ï¼Œåšäº‹æœ‰è¾ƒå¼ºçš„ç›®çš„æ€§ã€‚', activities: 'é¢†å¯¼å’Œå½±å“åˆ«äººï¼Œå–„äºè¯´æœåˆ«äººã€‚ç»è¥ã€ç®¡ç†ã€åŠæœã€ç›‘ç£ã€‚', careers: 'å•†ä¸šç®¡ç†ã€å¾‹å¸ˆã€é”€å”®ç»ç†ã€é‡‡è´­å‘˜ã€æŠ•èµ„å•†ã€‚' },
            { id: 'C', name: 'å¸¸è§„å‹ (Conventional)', icon: 'ğŸ“Š', traits: 'å°Šé‡æƒå¨å’Œè§„ç« åˆ¶åº¦ï¼Œç»†å¿ƒã€æœ‰æ¡ç†ã€‚å…³æ³¨å®é™…å’Œç»†èŠ‚ï¼Œè¾ƒä¸ºè°¨æ…ä¿å®ˆï¼Œç¼ºä¹åˆ›é€ æ€§ï¼Œä¸å–œæ¬¢å†’é™©ã€‚', activities: 'ç»„ç»‡å’Œå¤„ç†æ•°æ®ï¼Œå›ºå®šçš„ã€æœ‰ç§©åºçš„å·¥ä½œï¼Œå¸Œæœ›ç¡®åˆ‡åœ°çŸ¥é“å·¥ä½œæ ‡å‡†ã€‚', careers: 'ä¼šè®¡å¸ˆã€é“¶è¡Œå‡ºçº³ã€è¡Œæ”¿åŠ©ç†ã€ç§˜ä¹¦ã€ç¨åŠ¡ä¸“å®¶ã€‚' }
        ];

        // MBTI 24é¢˜
        const mbti_items = [
            { q: "åœ¨ç¤¾äº¤èšä¼šä¸Šï¼Œä½ é€šå¸¸ä¼š...", a: "ä¸»åŠ¨ä¸è®¸å¤šäººäº¤è°ˆï¼ŒåŒ…æ‹¬é™Œç”Ÿäºº", b: "åªä¸å‡ ä¸ªç†Ÿäººäº¤è°ˆ", k: ["E", "I"] },
            { q: "å½“ä½ éœ€è¦å……ç”µæ—¶ï¼Œä½ å€¾å‘äº...", a: "æ‰¾æœ‹å‹èšä¼šï¼Œçƒ­é—¹ä¸€ä¸‹", b: "ç‹¬è‡ªä¸€äººï¼Œäº«å—å®‰é™", k: ["E", "I"] },
            { q: "ä½ æ›´å–œæ¬¢...", a: "æˆä¸ºæ³¨æ„åŠ›çš„ç„¦ç‚¹", b: "åœ¨åå°é»˜é»˜è§‚å¯Ÿ", k: ["E", "I"] },
            { q: "åœ¨å›¢é˜Ÿä¸­ï¼Œä½ å€¾å‘äº...", a: "ç§¯æå‘è¨€ï¼Œä¸»å¯¼è®¨è®º", b: "å…ˆå¬åè¯´ï¼Œæ·±æ€ç†Ÿè™‘", k: ["E", "I"] },
            { q: "ä½ è®¤è¯†æ–°æœ‹å‹çš„é€Ÿåº¦...", a: "å¾ˆå¿«ï¼Œæˆ‘æ˜¯è‡ªæ¥ç†Ÿ", b: "å¾ˆæ…¢ï¼Œæˆ‘éœ€è¦æ—¶é—´", k: ["E", "I"] },
            { q: "å‘¨æœ«ä½ æ›´æ„¿æ„...", a: "å‡ºå»å‚åŠ æ´»åŠ¨æˆ–æ´¾å¯¹", b: "å®…åœ¨å®¶é‡Œçœ‹ä¹¦æˆ–è¿½å‰§", k: ["E", "I"] },
            { q: "ä½ æ›´çœ‹é‡...", a: "ç¡®å‡¿çš„äº‹å®å’Œç»†èŠ‚", b: "æœªæ¥çš„æ½œåŠ›å’Œå¯èƒ½æ€§", k: ["S", "N"] },
            { q: "åœ¨æ¥æ”¶ä¿¡æ¯æ—¶ï¼Œä½ åå‘...", a: "ç›¸ä¿¡å®é™…ç»éªŒå’Œè¯æ®", b: "ç›¸ä¿¡ç›´è§‰å’Œçµæ„Ÿ", k: ["S", "N"] },
            { q: "ä½ æ›´å–œæ¬¢å“ªç§æè¿°...", a: "è„šè¸å®åœ°çš„", b: "å¤©é©¬è¡Œç©ºçš„", k: ["S", "N"] },
            { q: "å¯¹äºåšäº‹æ–¹æ³•ï¼Œä½ å€¾å‘äº...", a: "æ²¿ç”¨ä¼ ç»Ÿçš„ã€è¢«è¯æ˜æœ‰æ•ˆçš„æ–¹æ³•", b: "å°è¯•æ–°é¢–çš„ã€ä¸ä¼—ä¸åŒçš„æ–¹æ³•", k: ["S", "N"] },
            { q: "ä½ æ›´æ“…é•¿...", a: "å¤„ç†å…·ä½“çš„æ—¥å¸¸äº‹åŠ¡", b: "æ„æ€å®å¤§çš„è“å›¾", k: ["S", "N"] },
            { q: "çœ‹ç”µå½±æ—¶ï¼Œä½ æ›´å…³æ³¨...", a: "ç”»é¢ã€é“å…·å’Œæƒ…èŠ‚çš„çœŸå®æ€§", b: "æ•…äº‹èƒŒåçš„å¯“æ„å’Œè±¡å¾", k: ["S", "N"] },
            { q: "åšå†³å®šæ—¶ï¼Œä½ æ›´ä¾èµ–...", a: "é€»è¾‘åˆ†æå’Œå®¢è§‚æ ‡å‡†", b: "ä¸ªäººä»·å€¼è§‚å’Œä»–äººæ„Ÿå—", k: ["T", "F"] },
            { q: "å¦‚æœä½ æ˜¯ç®¡ç†è€…ï¼Œä½ ä¼š...", a: "åšæŒåŸåˆ™ï¼Œå…¬äº‹å…¬åŠ", b: "è€ƒè™‘ä¸‹å±çš„æƒ…ç»ªï¼Œé…Œæƒ…å¤„ç†", k: ["T", "F"] },
            { q: "ä½ è®¤ä¸ºå“ªç§å“è´¨æ›´é‡è¦...", a: "ç†æ™ºä¸å…¬æ­£", b: "ä»æ…ˆä¸å’Œè°", k: ["T", "F"] },
            { q: "å½“æœ‹å‹é‡åˆ°å›°éš¾ï¼Œä½ é¦–å…ˆ...", a: "åˆ†æé—®é¢˜ï¼Œæä¾›è§£å†³æ–¹æ¡ˆ", b: "è¡¨è¾¾åŒæƒ…ï¼Œæä¾›æƒ…æ„Ÿæ”¯æŒ", k: ["T", "F"] },
            { q: "åœ¨äº‰è®ºä¸­ï¼Œä½ æ›´çœ‹é‡...", a: "è°çš„é“ç†æ˜¯å¯¹çš„", b: "æ˜¯å¦ä¼¤äº†å’Œæ°”", k: ["T", "F"] },
            { q: "ä½ æ›´å€¾å‘äºè¢«...è¯´æœ", a: "ä¸¥å¯†çš„é€»è¾‘æ¨å¯¼", b: "åŠ¨äººçš„æƒ…æ„Ÿå…±é¸£", k: ["T", "F"] },
            { q: "å¤„ç†å·¥ä½œä»»åŠ¡æ—¶ï¼Œä½ ä¹ æƒ¯...", a: "åˆ¶å®šè®¡åˆ’ï¼ŒæŒ‰éƒ¨å°±ç­", b: "çµæ´»åº”å¯¹ï¼Œéšå…´æ‰€è‡³", k: ["J", "P"] },
            { q: "ä½ çš„åŠå…¬æ¡Œé€šå¸¸...", a: "äº•äº•æœ‰æ¡ï¼Œåˆ†ç±»æ¸…æ™°", b: "æ¯”è¾ƒéšæ€§ï¼Œçœ‹ä¼¼æ‚ä¹±", k: ["J", "P"] },
            { q: "é¢å¯¹æœ€åæœŸé™ï¼ˆDDLï¼‰ï¼Œä½ é€šå¸¸...", a: "æå‰å®Œæˆï¼Œé¿å…å‹åŠ›", b: "åœ¨æœ€åä¸€åˆ»çˆ†å‘çµæ„Ÿ", k: ["J", "P"] },
            { q: "æ—…è¡Œå‰ï¼Œä½ ä¼š...", a: "æŸ¥å¥½æ”»ç•¥ï¼Œå®šå¥½è¡Œç¨‹", b: "åˆ°äº†å†è¯´ï¼Œäº«å—æœªçŸ¥", k: ["J", "P"] },
            { q: "ä½ æ›´å–œæ¬¢...", a: "äº‹æƒ…æœ‰å®šè®ºï¼Œå°˜åŸƒè½å®š", b: "ä¿ç•™é€‰æ‹©ï¼Œä¸åšå®šè®º", k: ["J", "P"] },
            { q: "æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œä½ ...", a: "å–œæ¬¢ä¸¥æ ¼éµå®ˆæ—¶é—´è¡¨", b: "è®¨åŒè¢«æ—¶é—´è¡¨æŸç¼š", k: ["J", "P"] }
        ];

        // ==========================================
        // æ ¸å¿ƒé€»è¾‘
        // ==========================================

        function startTest(type) {
            document.getElementById('lobby').style.display = 'none';
            document.getElementById('jspsych-target').style.display = 'block';
            let timeline = [];

            // ---------------- MBTI ----------------
            if (type === 'mbti') {
                timeline.push({
                    type: jsPsychHtmlButtonResponse,
                    stimulus: `<h2>MBTI äººæ ¼æ·±åº¦æµ‹è¯„</h2><p>å…±24é¢˜ã€‚è¯·é€‰æ‹©æ›´ç¬¦åˆä½ <b>è‡ªç„¶çŠ¶æ€</b>ä¸‹çš„ä¸€é¡¹ã€‚</p>`,
                    choices: ['å¼€å§‹æ¢ç´¢']
                });

                mbti_items.forEach((item, index) => {
                    timeline.push({
                        type: jsPsychHtmlButtonResponse,
                        stimulus: `<h3 style="margin-bottom:30px">ç¬¬ ${index+1}/24 é¢˜<br><br>${item.q}</h3>`,
                        choices: [item.a, item.b],
                        button_html: ['<button class="mbti-btn">%choice%</button>', '<button class="mbti-btn">%choice%</button>'],
                        data: { test_part: 'question', dims: item.k }
                    });
                });

                timeline.push({
                    type: jsPsychHtmlButtonResponse,
                    stimulus: 'æ­£åœ¨åˆ†ææ‚¨çš„äººæ ¼ä»£ç ...',
                    choices: [],
                    on_load: function() {
                        const responses = jsPsych.data.get().filter({test_part: 'question'}).values();
                        let scores = { E:0, I:0, S:0, N:0, T:0, F:0, J:0, P:0 };
                        
                        responses.forEach(r => {
                            let selectedDim = r.dims[r.response];
                            scores[selectedDim] += 1;
                        });

                        // è®¡ç®—ç±»å‹ä»£ç 
                        let typeStr = "";
                        typeStr += scores.E >= scores.I ? "E" : "I";
                        typeStr += scores.S >= scores.N ? "S" : "N";
                        typeStr += scores.T >= scores.F ? "T" : "F";
                        typeStr += scores.J >= scores.P ? "J" : "P";

                        // è·å–å¯¹åº”çš„ç§°å·å’Œæ–‡æœ¬
                        const resultData = mbti_results[typeStr] || { title: typeStr, quote: "ç‹¬ç‰¹çš„äººæ ¼", text: "æœªèƒ½åŒ¹é…åˆ°æè¿°ã€‚" };

                        const rawData = [scores.E, scores.I, scores.S, scores.N, scores.T, scores.F, scores.J, scores.P];
                        const chartData = rawData.map(s => (s / 6) * 100);

                        const html = `
                            <div class="result-box">
                                <div class="badge">${resultData.title}</div>
                                <div class="badge-subtitle">${typeStr}</div>
                                <div class="quote">â€œ${resultData.quote}â€</div>
                                
                                <div style="position: relative; height: 300px; width: 100%; margin: 20px auto;">
                                    <canvas id="resultChart"></canvas>
                                </div>

                                <div class="mbti-desc">
                                    <b>ğŸ’¡ æ€§æ ¼è§£æï¼š</b><br>
                                    ${resultData.text}
                                </div>
                            </div>
                        `;
                        document.getElementById('jspsych-content').innerHTML = html;
                        
                        const ctx = document.getElementById('resultChart').getContext('2d');
                        new Chart(ctx, {
                            type: 'radar',
                            data: {
                                labels: ["å¤–å‘ E", "å†…å‘ I", "å®æ„Ÿ S", "ç›´è§‰ N", "æ€è€ƒ T", "æƒ…æ„Ÿ F", "åˆ¤æ–­ J", "æ„ŸçŸ¥ P"],
                                datasets: [{
                                    label: "ç»´åº¦å€¾å‘", data: chartData, fill: true,
                                    backgroundColor: 'rgba(52, 152, 219, 0.2)', borderColor: 'rgb(52, 152, 219)',
                                    pointBackgroundColor: 'rgb(52, 152, 219)'
                                }]
                            },
                            options: {
                                scales: { r: { suggestedMin: 0, suggestedMax: 100, ticks: { display: false } } },
                                plugins: { legend: { display: false } }
                            }
                        });
                    }
                });
            }
            
            // ---------------- éœå…°å¾· ----------------
            else if (type === 'holland') {
                let userSelection = null;
                timeline.push({
                    type: jsPsychHtmlButtonResponse,
                    stimulus: `<h2>ğŸ”­ éœå…°å¾·èŒä¸šå…´è¶£è‡ªæµ‹</h2><p>è¯·æµè§ˆä¸‹æ–¹çš„6å¼ ç”»åƒå¡ç‰‡ï¼Œ<b>ç›´æ¥é€‰æ‹©æœ€ç¬¦åˆä½ çš„ä¸€å¼ </b>ã€‚</p>`,
                    choices: [],
                    on_start: function(trial) {
                        trial.choices = holland_profiles.map(p => p.id);
                        trial.button_html = holland_profiles.map(p => {
                            return `<button class="holland-card-btn">
                                        <div class="h-header"><span class="h-icon">${p.icon}</span><span class="h-title">${p.name}</span></div>
                                        <div class="h-section"><span class="h-label">æ€§æ ¼:</span>${p.traits}</div>
                                        <div class="h-section"><span class="h-label">æ´»åŠ¨:</span>${p.activities}</div>
                                    </button>`;
                        });
                        setTimeout(() => {
                            const g = document.getElementById('jspsych-html-button-response-btngroup');
                            if(g) { g.style.display='grid'; g.style.gridTemplateColumns='1fr 1fr'; g.style.gap='20px'; g.style.maxWidth='900px'; g.style.margin='0 auto'; }
                        }, 10);
                    },
                    on_finish: function(data) { userSelection = holland_profiles[data.response]; }
                });

                timeline.push({
                    type: jsPsychHtmlButtonResponse,
                    stimulus: 'ç”ŸæˆæŠ¥å‘Š...',
                    choices: [],
                    on_load: function() {
                        const p = userSelection;
                        const html = `
                            <div class="result-box" style="text-align:left; max-width:800px;">
                                <div class="hr-header">
                                    <div class="hr-icon">${p.icon}</div>
                                    <div class="hr-title">${p.name}</div>
                                </div>
                                <div class="hr-section"><span class="hr-label">ğŸ‘¤ æ€§æ ¼ç‰¹å¾</span><div class="hr-text">${p.traits}</div></div>
                                <div class="hr-section"><span class="hr-label">â¤ï¸ å–œæ¬¢çš„æ´»åŠ¨</span><div class="hr-text">${p.activities}</div></div>
                                <div class="hr-section"><span class="hr-label">ğŸ’¼ æ¨èèŒä¸š</span><div class="hr-text" style="font-weight:bold; color:#2c3e50;">${p.careers}</div></div>
                            </div>
                        `;
                        document.getElementById('jspsych-content').innerHTML = html;
                    }
                });
            }

            jsPsych.run(timeline);
        }
    </script>
</body>
</html>
